<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestión de Investigadores</title>
    <link
      rel="stylesheet"
      href="https://bootswatch.com/4/darkly/bootstrap.min.css"
    />
  </head>
  <body>
    <div class="container mt-4">
      <h1 class="mb-4">Gestión de Investigadores</h1>

      <h2 class="mt-5">Lista de Investigadores</h2>
      <div class="table-responsive">
        <table class="table table-dark">
          <thead>
            <tr>
              <th>ID del Autor</th>
              <th>Nombre del Autor</th>
              <th>Grados Académicos</th>
              <th>Imagen</th>
            </tr>
          </thead>
          <tbody id="investigadores-list">
            <!-- Aquí se cargarán los investigadores -->
          </tbody>
        </table>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
      $(document).ready(function () {
        // Obtener lista de investigadores al cargar la página
        $.getJSON("http://127.0.0.1:2000/datos", function (data) {
          var tbody = $("#investigadores-list");
          $.each(data, function (key, investigador) {
            var grados = investigador.grado_academico.join(", "); // Convertir array de grados académicos a string separado por comas
            var tr = $("<tr>").append(
              $("<td>").text(investigador.autor_id),
              $("<td>").text(investigador.nombre),
              $("<td>").text(grados),
              $("<td>").append(
                $("<img>")
                  .attr("src", investigador.ruta_imagen)
                  .attr("width", "100")
                  .addClass("img-thumbnail") // Agregar la clase de Bootstrap para imágenes redondeadas
              )
            );
            tbody.append(tr);
          });
        });
      });
    </script>
  </body>
</html>
